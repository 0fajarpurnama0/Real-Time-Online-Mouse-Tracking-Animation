/*! mcmmmska 2019-06-28 */

define(["jquery","jqueryui"],function(b,e){return{init:function(){b(document).ready(function(){$i=0,$name=[],$email=[],$date=[new Date],$now=[new Date],$duration=[0],$active=[],$x=[0],$y=[0],$ip_address=[],$current_url=[];var i=!($samplingmode=[]);$leftclick=[!1],$rightclick=[!1],$middleclick=[!1],$keyboardtype=[];var o,a,c=0,t=0;$scrollleft=[0],$scrolltop=[0],$windowwidth=[window.innerWidth],$windowheight=[window.innerHeight],$screenwidth=[screen.width],$screenheight=[screen.height],$zoom=[100*screen.width/window.innerWidth],$mTouch=[];var d,e,n=0,$=0;function s(){b(window).off(),b("#logging").is(":checked")?b("#sampling-rate-mode-checkbox").is(":checked")?e=setInterval(function(){i&&(h(),$i+=1,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),i=!1),b("#mouseclick").is(":checked")&&b(window).mousedown(function(e){switch(i=!0,l(),$x[$i]=e.pageX,$y[$i]=e.pageY,e.which){case 1:$leftclick[$i]=!0,o="left";break;case 2:$middleclick[$i]=!0,o="middle";break;case 3:$rightclick[$i]=!0,o="right";break;default:console.log("You have a strange Mouse!")}}).mouseup(function(e){$i+=1,l(),o="no click",$leftclick[$i]=!1,$middleclick[$i]=!1,$rightclick[$i]=!1,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#mousemove").is(":checked")&&b(window).mousemove(function(e){i=!0,l(),$x[$i]=e.pageX,$y[$i]=e.pageY}),b("#mousescroll").is(":checked")&&b(window).scroll(function(e){i=!0,l(),Number.isInteger($x[$i])&&Number.isInteger($y[$i])&&(c!=b(document).scrollLeft()&&($x[$i]-=c,c=b(document).scrollLeft(),$x[$i]+=c),t!=b(document).scrollTop()&&($y[$i]-=t,t=b(document).scrollTop(),$y[$i]+=t)),$scrollleft[$i]=b(document).scrollLeft(),$scrolltop[$i]=b(document).scrollTop()}),b("#keyboardpress").is(":checked")&&b(window).keypress(function(e){i=!0,l(),$keyboardtype[$i]+=e.key,a=e.key}),b("#tabstatus-checkbox").is(":checked")&&b(window).mouseenter(function(){$i+=1,b("#active").text("active"),l(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseover(function(){$i+=1,b("#active").text("active"),l(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("pageshow",function(){$i+=1,b("#active").text("active"),l(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseleave(function(){$i+=1,l(),b("#active").text("inactive"),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseout(function(){$i+=1,l(),b("#active").text("inactive"),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("pagehide",function(){$i+=1,l(),b("#active").text("inactive"),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#zoom").is(":checked")&&b(window).resize(function(){$i+=1,l(),$zoom[$i]=100*screen.width/window.innerWidth,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#touch").is(":checked")&&b(window).on("touchstart",function(e){$i+=1,l(),$mTouch[$i]="touched",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("touchend",function(e){$i+=1,l(),$mTouch[$i]="untouched",b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("touchcancel",function(e){$i+=1,l(),$mTouch[$i]="interrupted",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#touchmove").is(":checked")&&b(window).on("touchmove",function(e){$i+=1,l(),$mTouch[$i]="moving",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,zoom=100*screen.width/window.visualViewport.width,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()})},1e3/b("#sampling-rate").val()):(clearTimeout(e),b("#mouseclick").is(":checked")&&b(window).mousedown(function(e){switch($i+=1,l(),$x[$i]=e.pageX,$y[$i]=e.pageY,e.which){case 1:$leftclick[$i]=!0,o="left click";break;case 2:$middleclick[$i]=!0,o="middle click";break;case 3:$rightclick[$i]=!0,o="right click";break;default:console.log("You have a strange Mouse!")}b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseup(function(e){$i+=1,l(),o="no click",$leftclick[$i]=!1,$middleclick[$i]=!1,$rightclick[$i]=!1,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#mousemove").is(":checked")&&b(window).mousemove(function(e){$i+=1,l(),$x[$i]=e.pageX,$y[$i]=e.pageY,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#mousescroll").is(":checked")&&b(window).scroll(function(e){$i+=1,l(),Number.isInteger($x[$i])&&Number.isInteger($y[$i])&&(c!=b(document).scrollLeft()&&($x[$i]-=c,c=b(document).scrollLeft(),$x[$i]+=c),t!=b(document).scrollTop()&&($y[$i]-=t,t=b(document).scrollTop(),$y[$i]+=t)),$scrollleft[$i]=b(document).scrollLeft(),$scrolltop[$i]=b(document).scrollTop(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#keyboardpress").is(":checked")&&b(window).keypress(function(e){$i+=1,l(),$keyboardtype[$i]+=e.key,a=e.key,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#tabstatus-checkbox").is(":checked")&&b(window).mouseenter(function(){$i+=1,b("#active").text("active"),l(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseover(function(){$i+=1,b("#active").text("active"),l(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("pageshow",function(){$i+=1,b("#active").text("active"),l(),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseleave(function(){$i+=1,l(),b("#active").text("inactive"),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).mouseout(function(){$i+=1,l(),b("#active").text("inactive"),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("pagehide",function(){$i+=1,l(),b("#active").text("inactive"),b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#zoom").is(":checked")&&b(window).resize(function(){$i+=1,l(),$zoom[$i]=100*screen.width/window.innerWidth,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#touch").is(":checked")&&b(window).on("touchstart",function(e){$i+=1,l(),$mTouch[$i]="touched",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("touchend",function(e){$i+=1,l(),$mTouch[$i]="untouched",b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("touchcancel",function(e){$i+=1,l(),$mTouch[$i]="interrupted",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#touchmove").is(":checked")&&b(window).on("touchmove",function(e){$i+=1,l(),$mTouch[$i]="moving",$x[$i]=e.touches[0].pageX,$y[$i]=e.touches[0].pageY,zoom=100*screen.width/window.visualViewport.width,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}),b("#event-type").is(":checked")&&b(window).on("auxclick",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("contextmenu",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("dblclick",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("select",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("wheel",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("copy",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("cut",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()}).on("paste",function(e){$i+=1,l(),d=e.type,b("#data-to-database-on-fly-checkbox").is(":checked")&&r(b("#data-to-database-on-fly").val()),h()})):b(window).off()}function l(){n+=1,$+=1,b("#event-type").is(":checked")?$event_type[$i]=event.type:$event_type[$i]="disabled",b("#mouseclick").is(":checked")?($leftclick[$i]=$leftclick[$i-1],$rightclick[$i]=$rightclick[$i-1],$middleclick[$i]=$middleclick[$i-1]):($leftclick[$i]="disabled",$rightclick[$i]="disabled",$middleclick[$i]="disabled"),b("#touch").is(":checked")?$mTouch[$i]=$mTouch[$i-1]:$mTouch[$i]="disabled",b("#mousemove").is(":checked")||b("#touchmove").is(":checked")?($x[$i]=$x[$i-1],$y[$i]=$y[$i-1]):($x[$i]="disabled",$y[$i]="disabled"),b("#mousescroll").is(":checked")?($scrollleft[$i]=$scrollleft[$i-1],$scrolltop[$i]=$scrolltop[$i-1]):($scrollleft[$i]="disabled",$scrolltop[$i]="disabled"),b("#keyboardpress").is(":checked")?$keyboardtype[$i]="":$keyboardtype[$i]="disabled",b("#tabstatus-checkbox").is(":checked")?$active[$i]=b("#active").text():$active[$i]="disabled",b("#name-checkbox").is(":checked")?$name[$i]=b("#name").val():$name[$i]="anonymous",b("#email-checkbox").is(":checked")?$email[$i]=b("#email").val():$email[$i]="anonymous",b("#windowsize-checkbox").is(":checked")?($windowwidth[$i]=window.innerWidth,$windowheight[$i]=window.innerHeight):($windowwidth[$i]="disabled",$windowheight[$i]="disabled"),b("#screensize-checkbox").is(":checked")?($screenwidth[$i]=screen.width,$screenheight[$i]=screen.height):($screenwidth[$i]="disabled",$screenheight[$i]="disabled"),b("#zoom").is(":checked")?$zoom[$i]=100*screen.width/window.innerWidth:$zoom[$i]="disabled",b("#currenturl-checkbox").is(":checked")?$current_url[$i]=window.location.href:$current_url[$i]="disabled",$samplingmode[$i]=b("#sampling-rate-mode-checkbox").prop("checked"),$restrictedfocusviewer[$i]=b("#restricted-focus-viewer-imitation-checkbox").prop("checked"),$bubbleview[$i]=b("#bubble-view-imitation-checkbox").prop("checked"),$fingertracinglearningsystem[$i]=b("#finger-tracing-learning-system-imitation-checkbox").prop("checked"),$cursorreminder[$i]=b("#cursor-reminder").val(),$transparency[$i]=b("#transparency-control").val()/100,$magnifier[$i]=b("#fontsize-magnifier").val(),b("#color-checkbox").prop("checked")&&($textcolor[$i]=b("#color").val()),b("#background-color-checkbox").prop("checked")&&($backgroundcolor[$i]=b("#background-color").val()),b("#ipaddress-checkbox").is(":checked")?(b.getJSON("https://api.ipify.org?format=jsonp&callback=?",function(e){$ip_address[$i]=e.ip}),null==$ip_address[$i]&&($ip_address[$i]=$ip_address[$i-1])):$ip_address[$i]="disabled",b("#date-checkbox").is(":checked")?$date[$i]=new Date:$date[$i]="disabled",$now[$i]=new Date,b("#duration-checkbox").is(":checked")?$duration[$i]=($now[$i]-$now[$i-1])/1e3:$duration[$i]="disabled"}function r(e){var i={};i.$file=String($name[1]).replace(" ","")+String($now[1]).replace(":",".").replace(" ","")+".json","anonymous"!=$name[$i]&&(i.$name=$name[$i]),"anonymous"!=$email[$i]&&(i.$email=$email[$i]),"disabled"!=$date[$i]&&(i.$date=$date[$i]),"disabled"!=$x[$i]&&(i.$x=$x[$i]),"disabled"!=$y[$i]&&(i.$y=$y[$i]),"disabled"!=$active[$i]&&(i.$active=$active[$i]),"disabled"!=$duration[$i]&&(i.$duration=$duration[$i]),"disabled"!=$current_url[$i]&&(i.$current_url=$current_url[$i]),"disabled"!=$ip_address[$i]&&(i.$ip_address=$ip_address[$i]),"disabled"!=$samplingmode[$i]&&(i.$samplingmode=$samplingmode[$i]),"disabled"!=$leftclick[$i]&&(i.$leftclick=$leftclick[$i]),"disabled"!=$rightclick[$i]&&(i.$rightclick=$rightclick[$i]),"disabled"!=$middleclick[$i]&&(i.$middleclick=$middleclick[$i]),"disabled"!=$mTouch[$i]&&(i.$mTouch=$mTouch[$i]),"disabled"!=$keyboardtype[$i]&&(i.$keyboardtype=$keyboardtype[$i]),"disabled"!=$scrollleft[$i]&&(i.$scrollleft=$scrollleft[$i]),"disabled"!=$scrolltop[$i]&&(i.$scrolltop=$scrolltop[$i]),"disabled"!=$windowwidth[$i]&&(i.$windowwidth=$windowwidth[$i]),"disabled"!=$windowheight[$i]&&(i.$windowheight=$windowheight[$i]),"disabled"!=$screenwidth[$i]&&(i.$screenwidth=$screenwidth[$i]),"disabled"!=$screenheight[$i]&&(i.$screenheight=$screenheight[$i]),"disabled"!=$zoom[$i]&&(i.$zoom=$zoom[$i]),"disabled"!=$event_type[$i]&&(i.$event_type=$event_type[$i]),$restrictedfocusviewer[$i]&&(i.$restrictedfocusviewer=$restrictedfocusviewer[$i]),$bubbleview[$i]&&(i.$bubbleview=$bubbleview[$i]),$fingertracinglearningsystem[$i]&&(i.$fingertracinglearningsystem=$fingertracinglearningsystem[$i]),0!=$cursorreminder[$i]&&(i.$cursorreminder=$cursorreminder[$i]),100!=$transparency[$i]&&(i.$transparency=$transparency[$i]),1!=$magnifier[$i]&&(i.$magnifier=$magnifier[$i]),null!=$textcolor[$i]&&(i.$textcolor=$textcolor[$i]),null!=$backgroundcolor[$i]&&(i.$backgroundcolor=$backgroundcolor[$i]),b.post(e,i,function(e,i){console.log(e),console.log(i)})}function h(){b("#demo-checkbox").is(":checked")&&b("#demo").html("<strong>MouseX</strong>: "+$x[$i]+" ,<strong>MouseY</strong>: "+$y[$i]+" ,<strong>ScrollLeft</strong>: "+$scrollleft[$i]+" ,<strong>ScrollTop</strong>: "+$scrolltop[$i]+" ,<strong>KeyboardPress</strong>: "+a+" ,<strong>MouseClick</strong>: "+o+"<strong>Touch</strong>: "+$mTouch[$i]+" ,<strong>Zoom</strong>: "+$zoom[$i]+"% , <strong>events</strong>: "+n+" , <strong>eps</strong>: "+$+" , <strong>event type</strong>: "+$event_type[$i]+" , <strong>special event type</strong>: "+d).css("display","block")}$event_type=[],$restrictedfocusviewer=[],$bubbleview=[],$fingertracinglearningsystem=[],$cursorreminder=[],$transparency=[],$magnifier=[],$textcolor=[],$backgroundcolor=[],b("#demo-checkbox").is(":checked")&&b("body").prepend('<span class="sticky" id="demo"></span>'),b("#logging, #mouseclick, #mousemove, #mousescroll, #keyboardpress, #sampling-rate-mode-checkbox, #data-to-file-on-fly-checkbox, #data-to-database-on-fly-checkbox").click(function(){s()}).ready(function(){s()}),b("#demo-checkbox").click(function(){h()}).ready(function(){h()}),setInterval(function(){$=0},1e3)}).on("beforeunload",function(){b("#data-to-file-on-fly-checkbox").is(":checked")&&post_data_fly(b("#file-server-scrip").val())})}}});